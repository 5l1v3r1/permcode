// Generated by CoffeeScript 1.7.1
(function() {
  var mainCB, sendReq;

  sendReq = function(url, cb) {
    var req;
    req = $.getJSON(url, function(obj) {
      if (obj.error != null) {
        return cb(new Error(obj.error));
      }
      return cb(null, obj.result);
    });
    return req.fail(function() {
      return cb(new Error('failed to make request'));
    });
  };

  mainCB = function(err, str) {
    if (err != null) {
      return alert(err.toString());
    }
    return $('#data').val(str);
  };

  window.convertToPerm = function() {
    var theURL;
    theURL = 'convert?str=' + encodeURIComponent($('#data').val()) + '&outtype=perm';
    return sendReq(theURL, mainCB);
  };

  window.convertToText = function() {
    var theURL;
    theURL = 'convert?str=' + encodeURIComponent($('#data').val()) + '&outtype=text';
    return sendReq(theURL, mainCB);
  };

}).call(this);
